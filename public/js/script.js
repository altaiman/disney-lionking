'use strict';

(function (root) {

  // svg for all
  svg4everybody();
  scrollTo();

  function scrollTo() {
    var links = document.querySelectorAll('a[href*="#"]');
    links.forEach(function (each) {
      return each.onclick = scrollAnchors;
    });
  }

  function scrollAnchors(e) {
    var respond = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

    var distanceToTop = function distanceToTop(el) {
      return Math.floor(el.getBoundingClientRect().top);
    };

    e.preventDefault();

    var targetID = respond ? respond.getAttribute('href') : this.getAttribute('href');

    var targetAnchor = document.querySelector(targetID);

    if (!targetAnchor) return;

    var originalTop = distanceToTop(targetAnchor);

    window.scrollBy({ top: originalTop, left: 0, behavior: 'smooth' });

    var checkIfDone = setInterval(function () {
      var atBottom = window.innerHeight + window.pageYOffset >= document.body.offsetHeight - 2;
      if (distanceToTop(targetAnchor) === 0 || atBottom) {
        targetAnchor.tabIndex = '-1';
        targetAnchor.focus();
        window.history.pushState('', '', targetID);
        clearInterval(checkIfDone);
      }
    }, 100);

    document.querySelector('.menu').classList.remove('menu_open');
  }

  var sliderOptions = {
    'prizes': {
      cellAlign: 'center',
      prevNextButtons: false,
      groupCells: $(window).width() <= 768 ? 1 : 2,
      wrapAround: true,
      contain: true
    },
    'production': {
      cellAlign: 'center',
      prevNextButtons: false,
      groupCells: $(window).width() <= 1000 ? $(window).width() <= 768 ? 1 : 2 : 4,
      wrapAround: true,
      contain: true
    }
  };

  document.querySelectorAll('[data-slider]').forEach(function (slider, i) {
    var slides = slider.querySelector('[data-slider-slides]'),
        slidesCount = slides.children.length,
        sliderData = slider.dataset.slider,
        options = sliderOptions[sliderData],
        sliderWidth = slider.offsetWidth,
        slideWidth = slides.children[0].offsetWidth,
        slidesCapacity = Math.round(sliderWidth / slideWidth),
        controls = slider.querySelector('[data-slider-controls]'),
        controlsEndIndex = slidesCount - slidesCapacity,
        adaptive = Number(slider.dataset.sliderAdaptive),
        windowWidth = window.innerWidth;

    var controlsPrev = void 0,
        controlsNext = void 0;

    if (controls) {
      controlsPrev = controls.querySelector('[data-slider-controls-prev]'), controlsNext = controls.querySelector('[data-slider-controls-next]');
    }

    if (slidesCount > slidesCapacity) {
      slider.classList.add('slider_initial');
      var flkty = new Flickity(slides, sliderOptions[slider.dataset.slider]);

      if (controls) {
        controlsPrev.addEventListener('click', function (e) {
          e.preventDefault();
          flkty.previous();
        });

        controlsNext.addEventListener('click', function (e) {
          e.preventDefault();
          flkty.next();
        });

        if (!options.wrapAround) {
          if (flkty.selectedIndex === 0) {
            controlsPrev.disabled = true;
          } else if (flkty.selectedIndex === controlsEndIndex) {
            controlsNext.disabled = true;
          }
        }
      }
    }
  });

  $('.question__header').on('click', function (e) {
    e.preventDefault();

    $(this).next().slideToggle();
    $(this).parent().toggleClass('open');
  });

  $('.navigator__menu').on('click', function (e) {
    e.preventDefault();
    $('.menu').toggle();
  });

  $('.menu__close').on('click', function (e) {
    $('.menu').hide();
  });
})(window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJyb290Iiwic3ZnNGV2ZXJ5Ym9keSIsInNjcm9sbFRvIiwibGlua3MiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWFjaCIsIm9uY2xpY2siLCJzY3JvbGxBbmNob3JzIiwiZSIsInJlc3BvbmQiLCJkaXN0YW5jZVRvVG9wIiwiTWF0aCIsImZsb29yIiwiZWwiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldElEIiwiZ2V0QXR0cmlidXRlIiwidGFyZ2V0QW5jaG9yIiwicXVlcnlTZWxlY3RvciIsIm9yaWdpbmFsVG9wIiwid2luZG93Iiwic2Nyb2xsQnkiLCJsZWZ0IiwiYmVoYXZpb3IiLCJjaGVja0lmRG9uZSIsInNldEludGVydmFsIiwiYXRCb3R0b20iLCJpbm5lckhlaWdodCIsInBhZ2VZT2Zmc2V0IiwiYm9keSIsIm9mZnNldEhlaWdodCIsInRhYkluZGV4IiwiZm9jdXMiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwiY2xlYXJJbnRlcnZhbCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInNsaWRlck9wdGlvbnMiLCJjZWxsQWxpZ24iLCJwcmV2TmV4dEJ1dHRvbnMiLCJncm91cENlbGxzIiwiJCIsIndpZHRoIiwid3JhcEFyb3VuZCIsImNvbnRhaW4iLCJzbGlkZXIiLCJpIiwic2xpZGVzIiwic2xpZGVzQ291bnQiLCJjaGlsZHJlbiIsImxlbmd0aCIsInNsaWRlckRhdGEiLCJkYXRhc2V0Iiwib3B0aW9ucyIsInNsaWRlcldpZHRoIiwib2Zmc2V0V2lkdGgiLCJzbGlkZVdpZHRoIiwic2xpZGVzQ2FwYWNpdHkiLCJyb3VuZCIsImNvbnRyb2xzIiwiY29udHJvbHNFbmRJbmRleCIsImFkYXB0aXZlIiwiTnVtYmVyIiwic2xpZGVyQWRhcHRpdmUiLCJ3aW5kb3dXaWR0aCIsImlubmVyV2lkdGgiLCJjb250cm9sc1ByZXYiLCJjb250cm9sc05leHQiLCJhZGQiLCJmbGt0eSIsIkZsaWNraXR5IiwiYWRkRXZlbnRMaXN0ZW5lciIsInByZXZpb3VzIiwibmV4dCIsInNlbGVjdGVkSW5kZXgiLCJkaXNhYmxlZCIsIm9uIiwic2xpZGVUb2dnbGUiLCJwYXJlbnQiLCJ0b2dnbGVDbGFzcyIsInRvZ2dsZSIsImhpZGUiXSwibWFwcGluZ3MiOiI7O0FBQUEsQ0FBQyxVQUFTQSxJQUFULEVBQWU7O0FBRWQ7QUFDQUM7QUFDQUM7O0FBRUEsV0FBU0EsUUFBVCxHQUFvQjtBQUNuQixRQUFNQyxRQUFRQyxTQUFTQyxnQkFBVCxDQUEwQixjQUExQixDQUFkO0FBQ0FGLFVBQU1HLE9BQU4sQ0FBYztBQUFBLGFBQVNDLEtBQUtDLE9BQUwsR0FBZUMsYUFBeEI7QUFBQSxLQUFkO0FBQ0E7O0FBRUQsV0FBU0EsYUFBVCxDQUF1QkMsQ0FBdkIsRUFBMEM7QUFBQSxRQUFoQkMsT0FBZ0IsdUVBQU4sSUFBTTs7QUFDekMsUUFBTUMsZ0JBQWdCLFNBQWhCQSxhQUFnQjtBQUFBLGFBQU1DLEtBQUtDLEtBQUwsQ0FBV0MsR0FBR0MscUJBQUgsR0FBMkJDLEdBQXRDLENBQU47QUFBQSxLQUF0Qjs7QUFFQVAsTUFBRVEsY0FBRjs7QUFFQSxRQUFJQyxXQUFZUixPQUFELEdBQVlBLFFBQVFTLFlBQVIsQ0FBcUIsTUFBckIsQ0FBWixHQUEyQyxLQUFLQSxZQUFMLENBQWtCLE1BQWxCLENBQTFEOztBQUVBLFFBQU1DLGVBQWVqQixTQUFTa0IsYUFBVCxDQUF1QkgsUUFBdkIsQ0FBckI7O0FBRUMsUUFBSSxDQUFDRSxZQUFMLEVBQW1COztBQUVwQixRQUFNRSxjQUFjWCxjQUFjUyxZQUFkLENBQXBCOztBQUVBRyxXQUFPQyxRQUFQLENBQWdCLEVBQUVSLEtBQUtNLFdBQVAsRUFBb0JHLE1BQU0sQ0FBMUIsRUFBNkJDLFVBQVUsUUFBdkMsRUFBaEI7O0FBRUEsUUFBTUMsY0FBY0MsWUFBWSxZQUFXO0FBQzFDLFVBQU1DLFdBQVdOLE9BQU9PLFdBQVAsR0FBcUJQLE9BQU9RLFdBQTVCLElBQTJDNUIsU0FBUzZCLElBQVQsQ0FBY0MsWUFBZCxHQUE2QixDQUF6RjtBQUNBLFVBQUl0QixjQUFjUyxZQUFkLE1BQWdDLENBQWhDLElBQXFDUyxRQUF6QyxFQUFtRDtBQUNsRFQscUJBQWFjLFFBQWIsR0FBd0IsSUFBeEI7QUFDQWQscUJBQWFlLEtBQWI7QUFDQVosZUFBT2EsT0FBUCxDQUFlQyxTQUFmLENBQXlCLEVBQXpCLEVBQTZCLEVBQTdCLEVBQWlDbkIsUUFBakM7QUFDQW9CLHNCQUFjWCxXQUFkO0FBQ0E7QUFDRCxLQVJtQixFQVFqQixHQVJpQixDQUFwQjs7QUFVQ3hCLGFBQVNrQixhQUFULENBQXVCLE9BQXZCLEVBQWdDa0IsU0FBaEMsQ0FBMENDLE1BQTFDLENBQWlELFdBQWpEO0FBQ0Q7O0FBRUQsTUFBTUMsZ0JBQWdCO0FBQ3BCLGNBQVU7QUFDUkMsaUJBQVcsUUFESDtBQUVSQyx1QkFBaUIsS0FGVDtBQUdSQyxrQkFBYUMsRUFBRXRCLE1BQUYsRUFBVXVCLEtBQVYsTUFBcUIsR0FBdEIsR0FBNkIsQ0FBN0IsR0FBaUMsQ0FIckM7QUFJUkMsa0JBQVksSUFKSjtBQUtSQyxlQUFTO0FBTEQsS0FEVTtBQVFwQixrQkFBYztBQUNaTixpQkFBVyxRQURDO0FBRVpDLHVCQUFpQixLQUZMO0FBR1pDLGtCQUFhQyxFQUFFdEIsTUFBRixFQUFVdUIsS0FBVixNQUFxQixJQUF0QixHQUFnQ0QsRUFBRXRCLE1BQUYsRUFBVXVCLEtBQVYsTUFBcUIsR0FBdEIsR0FBNkIsQ0FBN0IsR0FBaUMsQ0FBaEUsR0FBcUUsQ0FIckU7QUFJWkMsa0JBQVksSUFKQTtBQUtaQyxlQUFTO0FBTEc7QUFSTSxHQUF0Qjs7QUFpQkE3QyxXQUFTQyxnQkFBVCxDQUEwQixlQUExQixFQUEyQ0MsT0FBM0MsQ0FBbUQsVUFBQzRDLE1BQUQsRUFBU0MsQ0FBVCxFQUFlO0FBQ2hFLFFBQU1DLFNBQVNGLE9BQU81QixhQUFQLENBQXFCLHNCQUFyQixDQUFmO0FBQUEsUUFDTStCLGNBQWNELE9BQU9FLFFBQVAsQ0FBZ0JDLE1BRHBDO0FBQUEsUUFFTUMsYUFBYU4sT0FBT08sT0FBUCxDQUFlUCxNQUZsQztBQUFBLFFBR01RLFVBQVVoQixjQUFjYyxVQUFkLENBSGhCO0FBQUEsUUFJTUcsY0FBY1QsT0FBT1UsV0FKM0I7QUFBQSxRQUtNQyxhQUFhVCxPQUFPRSxRQUFQLENBQWdCLENBQWhCLEVBQW1CTSxXQUx0QztBQUFBLFFBTU1FLGlCQUFpQmpELEtBQUtrRCxLQUFMLENBQVdKLGNBQVlFLFVBQXZCLENBTnZCO0FBQUEsUUFPTUcsV0FBV2QsT0FBTzVCLGFBQVAsQ0FBcUIsd0JBQXJCLENBUGpCO0FBQUEsUUFRTTJDLG1CQUFtQlosY0FBY1MsY0FSdkM7QUFBQSxRQVNNSSxXQUFXQyxPQUFPakIsT0FBT08sT0FBUCxDQUFlVyxjQUF0QixDQVRqQjtBQUFBLFFBVU1DLGNBQWM3QyxPQUFPOEMsVUFWM0I7O0FBWUEsUUFBSUMscUJBQUo7QUFBQSxRQUFrQkMscUJBQWxCOztBQUVBLFFBQUlSLFFBQUosRUFBYztBQUNaTyxxQkFBZVAsU0FBUzFDLGFBQVQsQ0FBdUIsNkJBQXZCLENBQWYsRUFDQWtELGVBQWVSLFNBQVMxQyxhQUFULENBQXVCLDZCQUF2QixDQURmO0FBRUQ7O0FBRUQsUUFBSStCLGNBQWNTLGNBQWxCLEVBQWtDO0FBQ2hDWixhQUFPVixTQUFQLENBQWlCaUMsR0FBakIsQ0FBcUIsZ0JBQXJCO0FBQ0EsVUFBTUMsUUFBUSxJQUFJQyxRQUFKLENBQWF2QixNQUFiLEVBQXFCVixjQUFjUSxPQUFPTyxPQUFQLENBQWVQLE1BQTdCLENBQXJCLENBQWQ7O0FBRUEsVUFBSWMsUUFBSixFQUFjO0FBQ1pPLHFCQUNHSyxnQkFESCxDQUNvQixPQURwQixFQUM2QixVQUFDbEUsQ0FBRCxFQUFPO0FBQ2hDQSxZQUFFUSxjQUFGO0FBQ0F3RCxnQkFBTUcsUUFBTjtBQUNELFNBSkg7O0FBTUFMLHFCQUNHSSxnQkFESCxDQUNvQixPQURwQixFQUM2QixVQUFDbEUsQ0FBRCxFQUFPO0FBQ2hDQSxZQUFFUSxjQUFGO0FBQ0F3RCxnQkFBTUksSUFBTjtBQUNELFNBSkg7O0FBTUEsWUFBSSxDQUFDcEIsUUFBUVYsVUFBYixFQUF5QjtBQUN2QixjQUFJMEIsTUFBTUssYUFBTixLQUF3QixDQUE1QixFQUErQjtBQUM3QlIseUJBQWFTLFFBQWIsR0FBd0IsSUFBeEI7QUFDRCxXQUZELE1BRU8sSUFBSU4sTUFBTUssYUFBTixLQUF3QmQsZ0JBQTVCLEVBQThDO0FBQ25ETyx5QkFBYVEsUUFBYixHQUF3QixJQUF4QjtBQUNEO0FBQ0Y7QUFDRjtBQUNGO0FBQ0YsR0E5Q0Q7O0FBZ0RBbEMsSUFBRSxtQkFBRixFQUF1Qm1DLEVBQXZCLENBQTBCLE9BQTFCLEVBQW1DLFVBQVN2RSxDQUFULEVBQVk7QUFDN0NBLE1BQUVRLGNBQUY7O0FBRUE0QixNQUFFLElBQUYsRUFBUWdDLElBQVIsR0FBZUksV0FBZjtBQUNBcEMsTUFBRSxJQUFGLEVBQVFxQyxNQUFSLEdBQWlCQyxXQUFqQixDQUE2QixNQUE3QjtBQUNELEdBTEQ7O0FBT0F0QyxJQUFFLGtCQUFGLEVBQXNCbUMsRUFBdEIsQ0FBeUIsT0FBekIsRUFBa0MsVUFBU3ZFLENBQVQsRUFBWTtBQUM1Q0EsTUFBRVEsY0FBRjtBQUNBNEIsTUFBRSxPQUFGLEVBQVd1QyxNQUFYO0FBQ0QsR0FIRDs7QUFLQXZDLElBQUUsY0FBRixFQUFrQm1DLEVBQWxCLENBQXFCLE9BQXJCLEVBQThCLFVBQVN2RSxDQUFULEVBQVk7QUFDeENvQyxNQUFFLE9BQUYsRUFBV3dDLElBQVg7QUFDRCxHQUZEO0FBSUQsQ0F4SEQsRUF3SEc5RCxNQXhISCIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24ocm9vdCkge1xuXG4gIC8vIHN2ZyBmb3IgYWxsXG4gIHN2ZzRldmVyeWJvZHkoKVxuICBzY3JvbGxUbygpXG5cbiAgZnVuY3Rpb24gc2Nyb2xsVG8oKSB7XG4gIFx0Y29uc3QgbGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhW2hyZWYqPVwiI1wiXScpXG4gIFx0bGlua3MuZm9yRWFjaChlYWNoID0+IChlYWNoLm9uY2xpY2sgPSBzY3JvbGxBbmNob3JzKSlcbiAgfVxuXG4gIGZ1bmN0aW9uIHNjcm9sbEFuY2hvcnMoZSwgcmVzcG9uZCA9IG51bGwpIHtcbiAgXHRjb25zdCBkaXN0YW5jZVRvVG9wID0gZWwgPT4gTWF0aC5mbG9vcihlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3ApXG5cbiAgXHRlLnByZXZlbnREZWZhdWx0KClcblxuICBcdGxldCB0YXJnZXRJRCA9IChyZXNwb25kKSA/IHJlc3BvbmQuZ2V0QXR0cmlidXRlKCdocmVmJykgOiB0aGlzLmdldEF0dHJpYnV0ZSgnaHJlZicpXG5cbiAgXHRjb25zdCB0YXJnZXRBbmNob3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldElEKVxuXG4gICAgaWYgKCF0YXJnZXRBbmNob3IpIHJldHVyblxuXG4gIFx0Y29uc3Qgb3JpZ2luYWxUb3AgPSBkaXN0YW5jZVRvVG9wKHRhcmdldEFuY2hvcilcblxuICBcdHdpbmRvdy5zY3JvbGxCeSh7IHRvcDogb3JpZ2luYWxUb3AsIGxlZnQ6IDAsIGJlaGF2aW9yOiAnc21vb3RoJyB9KVxuXG4gIFx0Y29uc3QgY2hlY2tJZkRvbmUgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgXHRcdGNvbnN0IGF0Qm90dG9tID0gd2luZG93LmlubmVySGVpZ2h0ICsgd2luZG93LnBhZ2VZT2Zmc2V0ID49IGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0IC0gMlxuICBcdFx0aWYgKGRpc3RhbmNlVG9Ub3AodGFyZ2V0QW5jaG9yKSA9PT0gMCB8fCBhdEJvdHRvbSkge1xuICBcdFx0XHR0YXJnZXRBbmNob3IudGFiSW5kZXggPSAnLTEnXG4gIFx0XHRcdHRhcmdldEFuY2hvci5mb2N1cygpXG4gIFx0XHRcdHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZSgnJywgJycsIHRhcmdldElEKVxuICBcdFx0XHRjbGVhckludGVydmFsKGNoZWNrSWZEb25lKVxuICBcdFx0fVxuICBcdH0sIDEwMClcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51JykuY2xhc3NMaXN0LnJlbW92ZSgnbWVudV9vcGVuJylcbiAgfVxuXG4gIGNvbnN0IHNsaWRlck9wdGlvbnMgPSB7XG4gICAgJ3ByaXplcyc6IHtcbiAgICAgIGNlbGxBbGlnbjogJ2NlbnRlcicsXG4gICAgICBwcmV2TmV4dEJ1dHRvbnM6IGZhbHNlLFxuICAgICAgZ3JvdXBDZWxsczogKCQod2luZG93KS53aWR0aCgpIDw9IDc2OCkgPyAxIDogMixcbiAgICAgIHdyYXBBcm91bmQ6IHRydWUsXG4gICAgICBjb250YWluOiB0cnVlXG4gICAgfSxcbiAgICAncHJvZHVjdGlvbic6IHtcbiAgICAgIGNlbGxBbGlnbjogJ2NlbnRlcicsXG4gICAgICBwcmV2TmV4dEJ1dHRvbnM6IGZhbHNlLFxuICAgICAgZ3JvdXBDZWxsczogKCQod2luZG93KS53aWR0aCgpIDw9IDEwMDApID8gKCgkKHdpbmRvdykud2lkdGgoKSA8PSA3NjgpID8gMSA6IDIpIDogNCxcbiAgICAgIHdyYXBBcm91bmQ6IHRydWUsXG4gICAgICBjb250YWluOiB0cnVlXG4gICAgfVxuICB9XG5cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtc2xpZGVyXScpLmZvckVhY2goKHNsaWRlciwgaSkgPT4ge1xuICAgIGNvbnN0IHNsaWRlcyA9IHNsaWRlci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zbGlkZXItc2xpZGVzXScpLFxuICAgICAgICAgIHNsaWRlc0NvdW50ID0gc2xpZGVzLmNoaWxkcmVuLmxlbmd0aCxcbiAgICAgICAgICBzbGlkZXJEYXRhID0gc2xpZGVyLmRhdGFzZXQuc2xpZGVyLFxuICAgICAgICAgIG9wdGlvbnMgPSBzbGlkZXJPcHRpb25zW3NsaWRlckRhdGFdLFxuICAgICAgICAgIHNsaWRlcldpZHRoID0gc2xpZGVyLm9mZnNldFdpZHRoLFxuICAgICAgICAgIHNsaWRlV2lkdGggPSBzbGlkZXMuY2hpbGRyZW5bMF0ub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgc2xpZGVzQ2FwYWNpdHkgPSBNYXRoLnJvdW5kKHNsaWRlcldpZHRoL3NsaWRlV2lkdGgpLFxuICAgICAgICAgIGNvbnRyb2xzID0gc2xpZGVyLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNsaWRlci1jb250cm9sc10nKSxcbiAgICAgICAgICBjb250cm9sc0VuZEluZGV4ID0gc2xpZGVzQ291bnQgLSBzbGlkZXNDYXBhY2l0eSxcbiAgICAgICAgICBhZGFwdGl2ZSA9IE51bWJlcihzbGlkZXIuZGF0YXNldC5zbGlkZXJBZGFwdGl2ZSksXG4gICAgICAgICAgd2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aFxuXG4gICAgbGV0IGNvbnRyb2xzUHJldiwgY29udHJvbHNOZXh0XG5cbiAgICBpZiAoY29udHJvbHMpIHtcbiAgICAgIGNvbnRyb2xzUHJldiA9IGNvbnRyb2xzLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNsaWRlci1jb250cm9scy1wcmV2XScpLFxuICAgICAgY29udHJvbHNOZXh0ID0gY29udHJvbHMucXVlcnlTZWxlY3RvcignW2RhdGEtc2xpZGVyLWNvbnRyb2xzLW5leHRdJylcbiAgICB9XG5cbiAgICBpZiAoc2xpZGVzQ291bnQgPiBzbGlkZXNDYXBhY2l0eSkge1xuICAgICAgc2xpZGVyLmNsYXNzTGlzdC5hZGQoJ3NsaWRlcl9pbml0aWFsJylcbiAgICAgIGNvbnN0IGZsa3R5ID0gbmV3IEZsaWNraXR5KHNsaWRlcywgc2xpZGVyT3B0aW9uc1tzbGlkZXIuZGF0YXNldC5zbGlkZXJdKTtcblxuICAgICAgaWYgKGNvbnRyb2xzKSB7XG4gICAgICAgIGNvbnRyb2xzUHJldlxuICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgIGZsa3R5LnByZXZpb3VzKClcbiAgICAgICAgICB9KVxuXG4gICAgICAgIGNvbnRyb2xzTmV4dFxuICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgIGZsa3R5Lm5leHQoKVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgaWYgKCFvcHRpb25zLndyYXBBcm91bmQpIHtcbiAgICAgICAgICBpZiAoZmxrdHkuc2VsZWN0ZWRJbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgY29udHJvbHNQcmV2LmRpc2FibGVkID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoZmxrdHkuc2VsZWN0ZWRJbmRleCA9PT0gY29udHJvbHNFbmRJbmRleCkge1xuICAgICAgICAgICAgY29udHJvbHNOZXh0LmRpc2FibGVkID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuICAkKCcucXVlc3Rpb25fX2hlYWRlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAkKHRoaXMpLm5leHQoKS5zbGlkZVRvZ2dsZSgpO1xuICAgICQodGhpcykucGFyZW50KCkudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcbiAgfSlcblxuICAkKCcubmF2aWdhdG9yX19tZW51Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAkKCcubWVudScpLnRvZ2dsZSgpO1xuICB9KVxuXG4gICQoJy5tZW51X19jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAkKCcubWVudScpLmhpZGUoKTtcbiAgfSlcblxufSkod2luZG93KTtcbiJdfQ==
