'use strict';

(function (root) {

  // svg for all
  svg4everybody();
  scrollTo();

  function scrollTo() {
    var links = document.querySelectorAll('a[href*="#"]');
    links.forEach(function (each) {
      return each.onclick = scrollAnchors;
    });
  }

  function scrollAnchors(e) {
    var respond = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

    var distanceToTop = function distanceToTop(el) {
      return Math.floor(el.getBoundingClientRect().top);
    };

    e.preventDefault();

    var targetID = respond ? respond.getAttribute('href') : this.getAttribute('href');

    var targetAnchor = document.querySelector(targetID);

    if (!targetAnchor) return;

    var originalTop = distanceToTop(targetAnchor);

    window.scrollBy({ top: originalTop, left: 0, behavior: 'smooth' });

    var checkIfDone = setInterval(function () {
      var atBottom = window.innerHeight + window.pageYOffset >= document.body.offsetHeight - 2;
      if (distanceToTop(targetAnchor) === 0 || atBottom) {
        targetAnchor.tabIndex = '-1';
        targetAnchor.focus();
        window.history.pushState('', '', targetID);
        clearInterval(checkIfDone);
      }
    }, 100);

    document.querySelector('.menu').classList.remove('menu_open');
  }

  var sliderOptions = {
    'prizes': {
      cellAlign: 'center',
      prevNextButtons: false,
      groupCells: $(window).width() <= 768 ? 1 : 2,
      wrapAround: true,
      contain: true
    },
    'production': {
      cellAlign: 'center',
      prevNextButtons: false,
      groupCells: $(window).width() <= 1000 ? $(window).width() <= 768 ? 1 : 2 : 4,
      wrapAround: true,
      contain: true
    }
  };

  document.querySelectorAll('[data-slider]').forEach(function (slider, i) {
    var slides = slider.querySelector('[data-slider-slides]'),
        slidesCount = slides.children.length,
        sliderData = slider.dataset.slider,
        options = sliderOptions[sliderData],
        sliderWidth = slider.offsetWidth,
        slideWidth = slides.children[0].offsetWidth,
        slidesCapacity = Math.round(sliderWidth / slideWidth),
        controls = slider.querySelector('[data-slider-controls]'),
        controlsEndIndex = slidesCount - slidesCapacity,
        adaptive = Number(slider.dataset.sliderAdaptive),
        windowWidth = window.innerWidth;

    var controlsPrev = void 0,
        controlsNext = void 0;

    if (controls) {
      controlsPrev = controls.querySelector('[data-slider-controls-prev]'), controlsNext = controls.querySelector('[data-slider-controls-next]');
    }

    if (slidesCount > slidesCapacity) {
      slider.classList.add('slider_initial');
      var flkty = new Flickity(slides, sliderOptions[slider.dataset.slider]);

      if (controls) {
        controlsPrev.addEventListener('click', function (e) {
          e.preventDefault();
          flkty.previous();
        });

        controlsNext.addEventListener('click', function (e) {
          e.preventDefault();
          flkty.next();
        });

        if (!options.wrapAround) {
          if (flkty.selectedIndex === 0) {
            controlsPrev.disabled = true;
          } else if (flkty.selectedIndex === controlsEndIndex) {
            controlsNext.disabled = true;
          }
        }
      }
    }
  });

  $('.question__header').on('click', function (e) {
    e.preventDefault();

    $(this).next().slideToggle();
    $(this).parent().toggleClass('open');
  });

  $('.navigator__menu').on('click', function (e) {
    e.preventDefault();
    $('.menu').toggle();
  });

  $('.menu__close').on('click', function (e) {
    $('.menu').hide();
  });

  $('.menu__link').on('click', function () {
    $('.menu__close').click();
  });

  // modals

  $('[data-modal]').iziModal();

  $('[data-modal-open]').on('click', function (e) {
    e.preventDefault();

    var data = $(this).data('modal-open');
    $('[data-modal="' + data + '"]').iziModal('open');
  });
})(window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJyb290Iiwic3ZnNGV2ZXJ5Ym9keSIsInNjcm9sbFRvIiwibGlua3MiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWFjaCIsIm9uY2xpY2siLCJzY3JvbGxBbmNob3JzIiwiZSIsInJlc3BvbmQiLCJkaXN0YW5jZVRvVG9wIiwiTWF0aCIsImZsb29yIiwiZWwiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldElEIiwiZ2V0QXR0cmlidXRlIiwidGFyZ2V0QW5jaG9yIiwicXVlcnlTZWxlY3RvciIsIm9yaWdpbmFsVG9wIiwid2luZG93Iiwic2Nyb2xsQnkiLCJsZWZ0IiwiYmVoYXZpb3IiLCJjaGVja0lmRG9uZSIsInNldEludGVydmFsIiwiYXRCb3R0b20iLCJpbm5lckhlaWdodCIsInBhZ2VZT2Zmc2V0IiwiYm9keSIsIm9mZnNldEhlaWdodCIsInRhYkluZGV4IiwiZm9jdXMiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwiY2xlYXJJbnRlcnZhbCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInNsaWRlck9wdGlvbnMiLCJjZWxsQWxpZ24iLCJwcmV2TmV4dEJ1dHRvbnMiLCJncm91cENlbGxzIiwiJCIsIndpZHRoIiwid3JhcEFyb3VuZCIsImNvbnRhaW4iLCJzbGlkZXIiLCJpIiwic2xpZGVzIiwic2xpZGVzQ291bnQiLCJjaGlsZHJlbiIsImxlbmd0aCIsInNsaWRlckRhdGEiLCJkYXRhc2V0Iiwib3B0aW9ucyIsInNsaWRlcldpZHRoIiwib2Zmc2V0V2lkdGgiLCJzbGlkZVdpZHRoIiwic2xpZGVzQ2FwYWNpdHkiLCJyb3VuZCIsImNvbnRyb2xzIiwiY29udHJvbHNFbmRJbmRleCIsImFkYXB0aXZlIiwiTnVtYmVyIiwic2xpZGVyQWRhcHRpdmUiLCJ3aW5kb3dXaWR0aCIsImlubmVyV2lkdGgiLCJjb250cm9sc1ByZXYiLCJjb250cm9sc05leHQiLCJhZGQiLCJmbGt0eSIsIkZsaWNraXR5IiwiYWRkRXZlbnRMaXN0ZW5lciIsInByZXZpb3VzIiwibmV4dCIsInNlbGVjdGVkSW5kZXgiLCJkaXNhYmxlZCIsIm9uIiwic2xpZGVUb2dnbGUiLCJwYXJlbnQiLCJ0b2dnbGVDbGFzcyIsInRvZ2dsZSIsImhpZGUiLCJjbGljayIsIml6aU1vZGFsIiwiZGF0YSJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxDQUFDLFVBQVNBLElBQVQsRUFBZTs7QUFFZDtBQUNBQztBQUNBQzs7QUFFQSxXQUFTQSxRQUFULEdBQW9CO0FBQ25CLFFBQU1DLFFBQVFDLFNBQVNDLGdCQUFULENBQTBCLGNBQTFCLENBQWQ7QUFDQUYsVUFBTUcsT0FBTixDQUFjO0FBQUEsYUFBU0MsS0FBS0MsT0FBTCxHQUFlQyxhQUF4QjtBQUFBLEtBQWQ7QUFDQTs7QUFFRCxXQUFTQSxhQUFULENBQXVCQyxDQUF2QixFQUEwQztBQUFBLFFBQWhCQyxPQUFnQix1RUFBTixJQUFNOztBQUN6QyxRQUFNQyxnQkFBZ0IsU0FBaEJBLGFBQWdCO0FBQUEsYUFBTUMsS0FBS0MsS0FBTCxDQUFXQyxHQUFHQyxxQkFBSCxHQUEyQkMsR0FBdEMsQ0FBTjtBQUFBLEtBQXRCOztBQUVBUCxNQUFFUSxjQUFGOztBQUVBLFFBQUlDLFdBQVlSLE9BQUQsR0FBWUEsUUFBUVMsWUFBUixDQUFxQixNQUFyQixDQUFaLEdBQTJDLEtBQUtBLFlBQUwsQ0FBa0IsTUFBbEIsQ0FBMUQ7O0FBRUEsUUFBTUMsZUFBZWpCLFNBQVNrQixhQUFULENBQXVCSCxRQUF2QixDQUFyQjs7QUFFQyxRQUFJLENBQUNFLFlBQUwsRUFBbUI7O0FBRXBCLFFBQU1FLGNBQWNYLGNBQWNTLFlBQWQsQ0FBcEI7O0FBRUFHLFdBQU9DLFFBQVAsQ0FBZ0IsRUFBRVIsS0FBS00sV0FBUCxFQUFvQkcsTUFBTSxDQUExQixFQUE2QkMsVUFBVSxRQUF2QyxFQUFoQjs7QUFFQSxRQUFNQyxjQUFjQyxZQUFZLFlBQVc7QUFDMUMsVUFBTUMsV0FBV04s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QUM3Q0EsTUFBRVEsY0FBRjs7QUFHQSxRQUFNdUUsT0FBTzNDLEVBQUUsSUFBRixFQUFRMkMsSUFBUixDQUFhLFlBQWIsQ0FBYjtBQUNBM0Msd0JBQWtCMkMsSUFBbEIsU0FBNEJELFFBQTVCLENBQXFDLE1BQXJDO0FBQ0QsR0FORDtBQVFELENBeElELEVBd0lHaEUsTUF4SUgiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKHJvb3QpIHtcblxuICAvLyBzdmcgZm9yIGFsbFxuICBzdmc0ZXZlcnlib2R5KClcbiAgc2Nyb2xsVG8oKVxuXG4gIGZ1bmN0aW9uIHNjcm9sbFRvKCkge1xuICBcdGNvbnN0IGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYVtocmVmKj1cIiNcIl0nKVxuICBcdGxpbmtzLmZvckVhY2goZWFjaCA9PiAoZWFjaC5vbmNsaWNrID0gc2Nyb2xsQW5jaG9ycykpXG4gIH1cblxuICBmdW5jdGlvbiBzY3JvbGxBbmNob3JzKGUsIHJlc3BvbmQgPSBudWxsKSB7XG4gIFx0Y29uc3QgZGlzdGFuY2VUb1RvcCA9IGVsID0+IE1hdGguZmxvb3IoZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wKVxuXG4gIFx0ZS5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgXHRsZXQgdGFyZ2V0SUQgPSAocmVzcG9uZCkgPyByZXNwb25kLmdldEF0dHJpYnV0ZSgnaHJlZicpIDogdGhpcy5nZXRBdHRyaWJ1dGUoJ2hyZWYnKVxuXG4gIFx0Y29uc3QgdGFyZ2V0QW5jaG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXRJRClcblxuICAgIGlmICghdGFyZ2V0QW5jaG9yKSByZXR1cm5cblxuICBcdGNvbnN0IG9yaWdpbmFsVG9wID0gZGlzdGFuY2VUb1RvcCh0YXJnZXRBbmNob3IpXG5cbiAgXHR3aW5kb3cuc2Nyb2xsQnkoeyB0b3A6IG9yaWdpbmFsVG9wLCBsZWZ0OiAwLCBiZWhhdmlvcjogJ3Ntb290aCcgfSlcblxuICBcdGNvbnN0IGNoZWNrSWZEb25lID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gIFx0XHRjb25zdCBhdEJvdHRvbSA9IHdpbmRvdy5pbm5lckhlaWdodCArIHdpbmRvdy5wYWdlWU9mZnNldCA+PSBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCAtIDJcbiAgXHRcdGlmIChkaXN0YW5jZVRvVG9wKHRhcmdldEFuY2hvcikgPT09IDAgfHwgYXRCb3R0b20pIHtcbiAgXHRcdFx0dGFyZ2V0QW5jaG9yLnRhYkluZGV4ID0gJy0xJ1xuICBcdFx0XHR0YXJnZXRBbmNob3IuZm9jdXMoKVxuICBcdFx0XHR3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoJycsICcnLCB0YXJnZXRJRClcbiAgXHRcdFx0Y2xlYXJJbnRlcnZhbChjaGVja0lmRG9uZSlcbiAgXHRcdH1cbiAgXHR9LCAxMDApXG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudScpLmNsYXNzTGlzdC5yZW1vdmUoJ21lbnVfb3BlbicpXG4gIH1cblxuICBjb25zdCBzbGlkZXJPcHRpb25zID0ge1xuICAgICdwcml6ZXMnOiB7XG4gICAgICBjZWxsQWxpZ246ICdjZW50ZXInLFxuICAgICAgcHJldk5leHRCdXR0b25zOiBmYWxzZSxcbiAgICAgIGdyb3VwQ2VsbHM6ICgkKHdpbmRvdykud2lkdGgoKSA8PSA3NjgpID8gMSA6IDIsXG4gICAgICB3cmFwQXJvdW5kOiB0cnVlLFxuICAgICAgY29udGFpbjogdHJ1ZVxuICAgIH0sXG4gICAgJ3Byb2R1Y3Rpb24nOiB7XG4gICAgICBjZWxsQWxpZ246ICdjZW50ZXInLFxuICAgICAgcHJldk5leHRCdXR0b25zOiBmYWxzZSxcbiAgICAgIGdyb3VwQ2VsbHM6ICgkKHdpbmRvdykud2lkdGgoKSA8PSAxMDAwKSA/ICgoJCh3aW5kb3cpLndpZHRoKCkgPD0gNzY4KSA/IDEgOiAyKSA6IDQsXG4gICAgICB3cmFwQXJvdW5kOiB0cnVlLFxuICAgICAgY29udGFpbjogdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXNsaWRlcl0nKS5mb3JFYWNoKChzbGlkZXIsIGkpID0+IHtcbiAgICBjb25zdCBzbGlkZXMgPSBzbGlkZXIucXVlcnlTZWxlY3RvcignW2RhdGEtc2xpZGVyLXNsaWRlc10nKSxcbiAgICAgICAgICBzbGlkZXNDb3VudCA9IHNsaWRlcy5jaGlsZHJlbi5sZW5ndGgsXG4gICAgICAgICAgc2xpZGVyRGF0YSA9IHNsaWRlci5kYXRhc2V0LnNsaWRlcixcbiAgICAgICAgICBvcHRpb25zID0gc2xpZGVyT3B0aW9uc1tzbGlkZXJEYXRhXSxcbiAgICAgICAgICBzbGlkZXJXaWR0aCA9IHNsaWRlci5vZmZzZXRXaWR0aCxcbiAgICAgICAgICBzbGlkZVdpZHRoID0gc2xpZGVzLmNoaWxkcmVuWzBdLm9mZnNldFdpZHRoLFxuICAgICAgICAgIHNsaWRlc0NhcGFjaXR5ID0gTWF0aC5yb3VuZChzbGlkZXJXaWR0aC9zbGlkZVdpZHRoKSxcbiAgICAgICAgICBjb250cm9scyA9IHNsaWRlci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zbGlkZXItY29udHJvbHNdJyksXG4gICAgICAgICAgY29udHJvbHNFbmRJbmRleCA9IHNsaWRlc0NvdW50IC0gc2xpZGVzQ2FwYWNpdHksXG4gICAgICAgICAgYWRhcHRpdmUgPSBOdW1iZXIoc2xpZGVyLmRhdGFzZXQuc2xpZGVyQWRhcHRpdmUpLFxuICAgICAgICAgIHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGhcblxuICAgIGxldCBjb250cm9sc1ByZXYsIGNvbnRyb2xzTmV4dFxuXG4gICAgaWYgKGNvbnRyb2xzKSB7XG4gICAgICBjb250cm9sc1ByZXYgPSBjb250cm9scy5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zbGlkZXItY29udHJvbHMtcHJldl0nKSxcbiAgICAgIGNvbnRyb2xzTmV4dCA9IGNvbnRyb2xzLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNsaWRlci1jb250cm9scy1uZXh0XScpXG4gICAgfVxuXG4gICAgaWYgKHNsaWRlc0NvdW50ID4gc2xpZGVzQ2FwYWNpdHkpIHtcbiAgICAgIHNsaWRlci5jbGFzc0xpc3QuYWRkKCdzbGlkZXJfaW5pdGlhbCcpXG4gICAgICBjb25zdCBmbGt0eSA9IG5ldyBGbGlja2l0eShzbGlkZXMsIHNsaWRlck9wdGlvbnNbc2xpZGVyLmRhdGFzZXQuc2xpZGVyXSk7XG5cbiAgICAgIGlmIChjb250cm9scykge1xuICAgICAgICBjb250cm9sc1ByZXZcbiAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICBmbGt0eS5wcmV2aW91cygpXG4gICAgICAgICAgfSlcblxuICAgICAgICBjb250cm9sc05leHRcbiAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICBmbGt0eS5uZXh0KClcbiAgICAgICAgICB9KVxuXG4gICAgICAgIGlmICghb3B0aW9ucy53cmFwQXJvdW5kKSB7XG4gICAgICAgICAgaWYgKGZsa3R5LnNlbGVjdGVkSW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnRyb2xzUHJldi5kaXNhYmxlZCA9IHRydWVcbiAgICAgICAgICB9IGVsc2UgaWYgKGZsa3R5LnNlbGVjdGVkSW5kZXggPT09IGNvbnRyb2xzRW5kSW5kZXgpIHtcbiAgICAgICAgICAgIGNvbnRyb2xzTmV4dC5kaXNhYmxlZCA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgJCgnLnF1ZXN0aW9uX19oZWFkZXInKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgJCh0aGlzKS5uZXh0KCkuc2xpZGVUb2dnbGUoKTtcbiAgICAkKHRoaXMpLnBhcmVudCgpLnRvZ2dsZUNsYXNzKCdvcGVuJyk7XG4gIH0pXG5cbiAgJCgnLm5hdmlnYXRvcl9fbWVudScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgJCgnLm1lbnUnKS50b2dnbGUoKTtcbiAgfSlcblxuICAkKCcubWVudV9fY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgJCgnLm1lbnUnKS5oaWRlKCk7XG4gIH0pXG5cbiAgJCgnLm1lbnVfX2xpbmsnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAkKCcubWVudV9fY2xvc2UnKS5jbGljaygpXG4gIH0pXG5cbiAgLy8gbW9kYWxzXG5cbiAgJCgnW2RhdGEtbW9kYWxdJykuaXppTW9kYWwoKVxuXG4gICQoJ1tkYXRhLW1vZGFsLW9wZW5dJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuXG5cbiAgICBjb25zdCBkYXRhID0gJCh0aGlzKS5kYXRhKCdtb2RhbC1vcGVuJylcbiAgICAkKGBbZGF0YS1tb2RhbD1cIiR7ZGF0YX1cIl1gKS5pemlNb2RhbCgnb3BlbicpXG4gIH0pXG5cbn0pKHdpbmRvdyk7XG4iXX0=
